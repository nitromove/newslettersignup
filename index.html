<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png" />
  <link rel="stylesheet" href="style.css">
  <title>Frontend Mentor | Newsletter sign-up form with success message</title>
  <style>
    .attribution {
      font-size: 11px;
      text-align: center;
    }
    .attribution a {
      color: hsl(228, 45%, 44%);
    }
    .dismiss-button {
      width: 50%;
      height: 3rem;
      background-color: hsl(234, 29%, 20%);
      border-radius: 1rem;
      color: white;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="form">
      <h1>Stay updated!</h1>
      <p>Join 60,000+ product managers receiving monthly updates on:</p>
      <ul>
        <li>
          <img src="icon-list.svg" alt="icon-list" /> Product
          discovery and building what matters
        </li>
        <li>
          <img src="icon-list.svg" alt="icon-list" /> Measuring
          to ensure updates are a success
        </li>
        <li>
          <img src="icon-list.svg" alt="icon-list" /> And much
          more!
        </li>
      </ul>

      <form id="signupForm">
        <label for="email"><h4 id="emailbar">Email address</h4></label>
        <p class="error-msg hidden">Valid email required</p>
        <input
          type="email"
          name="email"
          id="email"
          placeholder="email@company.com"
        />
      </form>
      <button onclick="changePage()">Subscribe to monthly newsletter</button>
    </div>
    <div class="image">
      <img
        src="illustration-sign-up-desktop.svg"
        alt="illustration-sign-up-desktop"
        class="desktop"
      />
      <img
        src="illustration-sign-up-mobile.svg"
        alt="illustration-sign-up-mobile"
        class="mobile"
      />
    </div>
  </div>

  <div id="newpage" class="newpage hidden">
    <div class="newpage_content" id="newPage_content">
      <img src="icon-success.svg" alt="icon-success">
      <h1>Thanks for subscribing!</h1>
      <p>A confirmation email has been sent to
      <span id="subscribedEmail"></span>. Please open it and click the button inside to confirm
      your subscription.</p>
      <button onclick="dismissMessage()" class="dismiss-button">Dismiss message</button>
    </div>
  </div>

  <div class="attribution">
    Challenge by
    <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
    Coded by <a href="#">Your Name Here</a>.
  </div>

  <script>
    const emailInput = document.getElementById("email");
    const signupForm = document.getElementById("signupForm");
    const newPage = document.getElementById("newpage");
    const newPage_content = document.getElementById("newPage_content");
    const subscribedEmail = document.getElementById("subscribedEmail");

    const styles = {
      fontSize: "16px",
      lineHeight: "1.5",
      fontFamily: "Roboto, sans-serif",
      backgroundColor: "hsl(235, 18%, 26%)",
      color: "hsl(234, 29%, 20%)",
      minHeight: "100vh",
      display: "flex",
      alignItems: "center",
      justifyContent: "center",
      flexDirection: "column",
    };

    const newPageStyles = {
      width: "520px",
      height: "520px",
      backgroundColor: "white",
      display: "flex",
      flexDirection: "column",
      alignItems: "start",
      justifyContent: "spaceEvenly",
      padding: "2rem",
      borderRadius: "2rem",
      gap: "1rem"
    };

    const buttonStyles = {
      width: "50%",
      height: "3rem",
      backgroundColor: "hsl(234, 29%, 20%)",
      borderRadius: "1rem",
      color: "white",
    };

    function isValidEmail(email) {
      const emailRegex = /^[\w.-]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,})+$/;
      return emailRegex.test(email);
    }

    function changePage() {
      if (isValidEmail(emailInput.value)) {
        Object.assign(newPage_content.style, newPageStyles);
        Object.assign(newPage.style, styles);
        document.documentElement.replaceWith(newPage);
        subscribedEmail.textContent = emailInput.value;
      } else {
        const errorMsg = document.querySelector(".error-msg");
        errorMsg.classList.remove("hidden");
      }
    }

    function dismissMessage() {
      location.reload();
    }
  </script>
</body>
</html>
